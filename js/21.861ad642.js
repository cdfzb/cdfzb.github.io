"use strict";(self["webpackChunkbetly_dapp"]=self["webpackChunkbetly_dapp"]||[]).push([[21],{28048:function(e,t,s){s.d(t,{Z:function(){return o}});var l=s(99485);const o=(0,l.Q_)("canvas",{state(){return{selectPixelList:[],activeColorId:80,selectColorList:[],selectColorId:0,page:0}},actions:{changePage(e){this.page=e,this.selectPixelList=[],this.selectColorList=[]},selectColorItem(e){this.selectColorList[e]==this.activeColorId?this.selectColorList.splice(e,1):this.selectColorList=[...this.selectColorList.slice(0,e),this.activeColorId,...this.selectColorList.slice(e+1)]},clearColor(){this.selectColorList=[]},selectColor(e){this.activeColorId!=e&&(this.selectColorId=e,this.activeColorId=e)},pixelExists(e){const t=this.selectPixelList.findIndex((t=>t.newPixel.boxId===e.newPixel.boxId));return t<0?(this.addSelectPixel(e),!0):this.selectPixelList[t].colorId==this.activeColorId?(this.removeSelectPixel(e),!1):(this.selectPixel(e),!0)},addSelectPixel(e){this.selectPixelList.push(e);const t=this.selectPixelList.filter((t=>t.colorId===e.colorId));1==t.length&&this.selectColorList.push(e.colorId)},removeSelectPixel(e){const t=this.selectPixelList.findIndex((t=>t.newPixel.boxId===e.newPixel.boxId));t>=0&&(this.selectPixelList=[...this.selectPixelList.slice(0,t),...this.selectPixelList.slice(t+1)]);const s=this.selectPixelList.filter((t=>t.colorId===e.colorId));if(0==s.length){const t=this.selectColorList.findIndex((t=>t==e.colorId));this.selectColorList=this.selectColorList.splice(t,1)}},selectPixel(e){const t=this.selectPixelList.findIndex((t=>t.newPixel.boxId===e.newPixel.boxId));this.selectPixelList[t].colorId=this.activeColorId;const s=this.selectPixelList.filter((t=>t.colorId===e.colorId));if(0==s.length){const t=this.selectColorList.findIndex((t=>t==e.colorId));this.selectColorList=this.selectColorList.splice(t,1)}}}})},46851:function(e,t,s){s.d(t,{Z:function(){return I}});var l=s(73396),o=s(87139),i=s(44870),c=s(49242),n=s(23111);const r={class:"now-color Wbg allFlex"},a={class:"now-color_left allFlex column center"},d={class:"blackWcolor font-One"},h={class:"mainColor font-Four font500"};var u={props:{colorId:String},setup(e){return(t,s)=>((0,l.wg)(),(0,l.iD)("div",r,[(0,l._)("div",a,[(0,l._)("p",d,(0,o.zw)(t.$t("color")),1),(0,l._)("p",h,(0,o.zw)(0==e.colorId?"#0":(0,i.SU)(n._)[e.colorId]),1)]),(0,l._)("span",{class:"f1",style:(0,o.j5)({background:0==e.colorId?"transparent":(0,i.SU)(n._)[e.colorId]})},null,4)]))}},p=s(40089);const f=(0,p.Z)(u,[["__scopeId","data-v-7188ae0c"]]);var w=f,S={props:{colorSelect:Object,pixelSize:Number},setup(e){const t=e,{colorSelect:s,pixelSize:c}=(0,i.BK)(t),n=(0,l.Fl)((()=>s.value.x)),r=(0,l.Fl)((()=>s.value.y));return(e,t)=>((0,l.wg)(),(0,l.iD)("div",{class:"PixelHoverHighlight",style:(0,o.j5)({transform:`translate(${(0,i.SU)(n)}px, ${(0,i.SU)(r)}px`,width:(0,i.SU)(c)+"px",height:(0,i.SU)(c)+"px"})},null,4))}};const x=(0,p.Z)(S,[["__scopeId","data-v-6b9d08ff"]]);var g=x,y=s(28048),A=s(69708);const v={class:"color-box"};var _={props:{type:String,size:Number},setup(e){const t=e,r=s(99872),a=(0,y.Z)(),{type:d,size:h}=(0,i.BK)(t),u=(0,i.qj)({colorSize:21,colorKonva:{width:16*h,height:16*h},colorClick:{x:0,y:0}}),p=(0,l.Fl)((()=>a.activeColorId)),f=[],S=()=>{const e=Math.sqrt(n._.length);for(let t=0;t<n._.length;t++){const s=t%e,l=Math.floor(t/e);f[l*e+s]=x(l*e+s,s*h.value,l*h.value,t)}},x=(e,t,s,l)=>({id:e,x:t,y:s,color:l}),_=e=>{u.colorClick=e.target.attrs,u.colorClick.colorId>=0&&(A.log(u.colorClick.colorId,n._[u.colorClick.colorId]),a.selectColor(u.colorClick.colorId,d.value))};return(0,l.wF)((()=>{S()})),(e,t)=>{const s=(0,l.up)("v-rect"),a=(0,l.up)("v-layer"),d=(0,l.up)("v-stage");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",v,[(0,l.Wm)(d,{style:(0,o.j5)({background:`url(${(0,i.SU)(r)})`,backgroundSize:(0,i.SU)(h)}),onTap:_,config:{width:16*(0,i.SU)(h),height:16*(0,i.SU)(h)}},{default:(0,l.w5)((()=>[(0,l.Wm)(a,null,{default:(0,l.w5)((()=>[((0,l.wg)(),(0,l.iD)(l.HY,null,(0,l.Ko)(f,((e,t)=>(0,l.Wm)(s,{key:t,x:e.x,y:e.y,width:(0,i.SU)(h),height:(0,i.SU)(h),colorId:e.color,fill:(0,i.SU)(n._)[e.color]},null,8,["x","y","width","height","colorId","fill"]))),64))])),_:1})])),_:1},8,["style","config"]),(0,l.wy)((0,l.Wm)(g,{colorSelect:(0,i.SU)(u).colorClick,pixelSize:(0,i.SU)(h)},null,8,["colorSelect","pixelSize"]),[[c.F8,(0,i.SU)(u).colorClick]])]),(0,l.Wm)(w,{colorId:(0,i.SU)(p)},null,8,["colorId"])],64)}}};const m=(0,p.Z)(_,[["__scopeId","data-v-fd71776a"]]);var I=m},46360:function(e,t,s){s.d(t,{Z:function(){return y}});var l=s(73396),o=s(87139),i=s(44870),c=s(49242),n=s(23111),r=s(42325);const a={class:"flex_between info"},d={class:"flex_start"},h={class:"Wcolor marginTy"},u={class:"right"},p={class:"flex_start"},f={class:"Wcolor Bold font-Te marginTen"},w={class:"Wcolor marginTen"};var S={props:{x:Number,y:Number,price:Number,colorId:Number,type:String},setup(e){return(t,s)=>((0,l.wg)(),(0,l.iD)("ul",a,[(0,l._)("li",d,[(0,l._)("span",{style:(0,o.j5)({background:(0,i.SU)(n._)[e.colorId]}),class:"color-btn"},null,4),(0,l._)("div",h,[(0,l._)("p",null,"X:"+(0,o.zw)(e.x),1),(0,l._)("p",null,"Y:"+(0,o.zw)(e.y),1)])]),(0,l._)("li",u,[(0,l.wy)((0,l._)("span",{class:"lightGrey font-Two"},(0,o.zw)(t.$t("price")),513),[[c.F8,"nft"==e.type]]),(0,l._)("div",p,[(0,l._)("span",f,(0,o.zw)("nft"==e.type?Number(e.price).toFixed(2):Number((0,i.SU)(r.IN)(e.price)).toFixed(2)),1),(0,l.wy)((0,l._)("span",w,"SkyT",512),[[c.F8,"nft"!==e.type]])])])]))}},x=s(40089);const g=(0,x.Z)(S,[["__scopeId","data-v-0735de9e"]]);var y=g},63867:function(e,t,s){s.d(t,{Z:function(){return x}});var l=s(73396),o=s(87139),i=s(49242),c=s(44870),n=(s(18688),s(31754)),r=s(67458),a=s(41258);const d={class:"bind allFlex column"},h={class:"popup-title Wcolor font-Eight font500 center"},u={key:0,class:"bind_ipt center Wcolor"},p={class:"bgPadding"};var f={props:{finish:Boolean,success:Boolean,hash:String,type:String,text:String,title:String,btn:String},emits:["closeFn"],setup(e,{emit:t}){const s=e,{hash:f}=(0,c.BK)(s),{toClipboard:w}=((0,n.l)(),(0,r.Z)());return(t,s)=>{const n=(0,l.up)("van-button");return(0,l.wg)(),(0,l.iD)("div",d,[(0,l.wy)((0,l._)("span",{class:(0,o.C_)(["success-btn Wcolor font-Two",[e.success?"btnBg":"redBg"]])},(0,o.zw)(e.success?t.$t("success"):t.$t("fail")),3),[[i.F8,e.finish]]),(0,l.wy)((0,l.Wm)(a.Z,{class:"loading"},null,512),[[i.F8,!e.finish]]),(0,l._)("p",h,(0,o.zw)(t.$t(e.title)),1),e.finish?(0,l.kq)("",!0):((0,l.wg)(),(0,l.iD)("div",u,[(0,l.WI)(t.$slots,"default")])),e.finish?((0,l.wg)(),(0,l.iD)("div",{key:1,class:(0,o.C_)(["bind_ipt bgPadding center",[e.success?"mainColor font-Ty":"redColor hashFont font-Four"]])},(0,o.zw)(e.success?t.$t(e.text):(0,c.SU)(f)),3)):(0,l.kq)("",!0),(0,l._)("div",p,[(0,l.wy)((0,l.Wm)(n,{class:"btn",type:"primary",block:""},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(t.$t(e.btn)),1)])),_:1},512),[[i.F8,!e.finish]]),(0,l.wy)((0,l.Wm)(n,{class:"btn",type:e.success?"primary":"danger",block:"",onClick:s[0]||(s[0]=e=>t.$emit("closeFn"))},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(t.$t("SwapAlert.close")),1)])),_:1},8,["type"]),[[i.F8,e.finish]])])])}}},w=s(40089);const S=(0,w.Z)(f,[["__scopeId","data-v-4ee0a202"]]);var x=S},40021:function(e,t,s){s.r(t),s.d(t,{default:function(){return N}});var l=s(73396),o=s(87139),i=s(44870),c=s(62012),n=s(46360),r="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAfCAMAAADdjm27AAAAe1BMVEUAAAD////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////NgkbwAAAAKHRSTlMAAhH3+/Qj8ey9hPnqJw4L7sG5tKGHG25mYFsfGOHFr6mTenQVz0QuZFz4dAAAAKZJREFUKM+Fz+kOgjAQBOACpaXcNyiHgqi8/xPaLYnuqoT5+WWy2WHtICebkQzrGpQLoXAF6y1Es6PNudbIksr9sXizS0dMGhPYfGMFNrtKjUXYfA8sP7ZwxwL1x7KI0XuwF5El7pq4QtIXsMxtkORG5uUttQKRN5sKx9Jt0nxLikRkDkh7LN4p/sgYUGFi5PofLKwACc8JGiuhQ4QpzqGD85zKB5UXnBEVim0ra3oAAAAASUVORK5CYII=",a=s(46851);const d={class:"flex_between change-color_title"},h={class:"font-Six Wcolor"},u={class:"color-box"};var p={emits:["setColor"],setup(e){const t=(0,i.qj)({show:!1});return(e,s)=>{const c=(0,l.up)("van-button");return(0,l.wg)(),(0,l.iD)("div",{class:"change-color",style:(0,o.j5)({height:(0,i.SU)(t).show?"490px":"30px"})},[(0,l._)("div",d,[(0,l._)("span",h,(0,o.zw)(e.$t("NFT.changeColor")),1),(0,l._)("img",{src:r,alt:"",class:(0,o.C_)(["right_icon",[(0,i.SU)(t).show&&"check_icon"]]),onClick:s[0]||(s[0]=e=>(0,i.SU)(t).show=!(0,i.SU)(t).show)},null,2)]),(0,l._)("div",u,[(0,l.Wm)(a.Z,{type:"nft",size:17}),(0,l.Wm)(c,{type:"primary",plain:"",block:"",onClick:s[1]||(s[1]=t=>e.$emit("setColor"))},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(e.$t("NFT.modity")),1)])),_:1})])],4)}}},f=s(40089);const w=(0,f.Z)(p,[["__scopeId","data-v-77ba7b54"]]);var S=w,x=s(63867),g=s(31754),y=s(28048),A=s(62672),v=s(42325),_=s(91254),m=s(24725);const I={class:"padding details"},U={class:"details_title flex_between"},k={class:"font-Seven Wcolor Bold"},b={class:"priceColor font-Two"},C={class:"font-Two Wcolor"},F={class:"details_img"},P=["src"],L={class:"titleBg details-info"},z={class:"font-Four"};var W={setup(e){const t=(0,g.l)(),s=(0,y.Z)(),r=(0,c.tv)(),a=(0,c.yj)(),{t:d}=(0,_.QT)(),h=(0,i.qj)({x:0,y:0,info:a.query,alertShow:!1,finish:!1,success:!1,hash:"",type:"modity",times:"",check:!1});(0,i.iH)(0);const u=(0,l.Fl)((()=>s.activeColorId)),p=(0,i.iH)(!1),f=(0,l.Fl)((()=>t.priceArr[h.times])),w=async()=>{if(0!=u.value){h.type="modity",h.alertShow=!0,h.finish=!1,h.success=!1;try{const e=await t.allMethods.setPixelColor(h.info.canvasid,h.info.index,u.value).send({from:t.address});h.info.color=u.value,h.finish=!0,h.success=!0,h.hash=e.transactionHash,t.addHash(h.hash,4)}catch(e){h.finish=!0,h.success=!1,h.hash=e.message}}else(0,A.F)(d("Home.alert1"))};(0,l.wF)((()=>{T(h.info.tokenid),h.x=(0,v.Vh)(h.info.tokenid).x,h.y=(0,v.Vh)(h.info.tokenid).y}));const W=async()=>{if(!(+h.times>=3)&&!h.check){h.check=!0,h.type="sell";try{const e=await t.allMethods.getApproved(h.info.tokenid).call();e==t.market_address?N():(t.setEmpowerType(2,h.info.tokenid),t.showEmpower(!0))}catch(e){h.check=!1,(0,A.F)(e)}}},T=async e=>{h.times=await t.marketMethods.nftTradeCount(e).call()},N=async()=>{h.alertShow=!0,h.finish=!1,h.success=!1;try{const e=await t.marketMethods.sell(h.info.tokenid).send({from:t.address});h.finish=!0,h.success=!0,h.hash=e.transactionHash,t.addHash(h.hash,1),h.check=!1}catch(e){h.finish=!0,h.success=!1,h.check=!1,h.hash=e.message}},Z=()=>{h.alertShow=!1,h.success&&"sell"==h.type&&setTimeout((()=>{r.go(-1)}),1e3)};return(0,l.m0)((()=>{h.info.endDate?p.value=1e3*+h.info.endDate+18e4>(new Date).getTime():p.value=!1})),(e,s)=>{const c=(0,l.up)("title-text"),r=(0,l.up)("van-button"),a=(0,l.up)("van-popup");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",I,[(0,l.Wm)(c),(0,l._)("div",U,[(0,l._)("span",k,(0,o.zw)(e.$t("name"))+"#"+(0,o.zw)((0,i.SU)(h).info.tokenid),1),(0,l._)("div",null,[(0,l._)("span",b,(0,o.zw)(e.$t("NFT.counts")),1),(0,l._)("span",C,(0,o.zw)((0,i.SU)(h).times>0?(0,i.SU)(h).times-1:0),1)])]),(0,l._)("div",F,[(0,l._)("img",{src:(0,i.SU)(v.Gr)((0,i.SU)(h).info.index),alt:""},null,8,P)]),(0,l._)("div",L,[(0,l.Wm)(n.Z,{price:(0,i.SU)(f),colorId:(0,i.SU)(h).info.color,x:(0,i.SU)(h).x,y:(0,i.SU)(h).y,type:"nft"},null,8,["price","colorId","x","y"]),(0,l.Wm)(S,{onSetColor:w}),p.value&&(0,i.SU)(h).times<3?((0,l.wg)(),(0,l.j4)(m.Z,{key:0,endDate:(0,i.SU)(h).info.endDate,onClose:s[0]||(s[0]=e=>p.value=!1),class:"font-Seven countdown"},null,8,["endDate"])):((0,l.wg)(),(0,l.j4)(r,{key:1,type:"primary",block:"",disabled:+(0,i.SU)(h).times>=3,onClick:W},{default:(0,l.w5)((()=>[(0,l.Uk)((0,o.zw)(+(0,i.SU)(h).times>=3?e.$t("NFT.notSell"):e.$t("NFT.sell")),1)])),_:1},8,["disabled"]))])]),(0,l.Wm)(a,{show:(0,i.SU)(h).alertShow,"onUpdate:show":s[1]||(s[1]=e=>(0,i.SU)(h).alertShow=e),"close-on-click-overlay":!1},{default:(0,l.w5)((()=>[(0,l.Wm)(x.Z,{finish:(0,i.SU)(h).finish,success:(0,i.SU)(h).success,hash:(0,i.SU)(h).hash,onCloseFn:Z,title:"sell"==(0,i.SU)(h).type?"SwapAlert.title6":"SwapAlert.title4",text:"sell"==(0,i.SU)(h).type?"SwapAlert.success3":"SwapAlert.success4",btn:"sell"==(0,i.SU)(h).type?"SwapAlert.btn3":"SwapAlert.btn4"},{default:(0,l.w5)((()=>[(0,l._)("p",z,(0,o.zw)("sell"==(0,i.SU)(h).type?e.$t("NFT.type1",{start:(0,i.SU)(t).address.slice(0,6),end:(0,i.SU)(t).address.slice(-4),tokenId:(0,i.SU)(h).info.tokenid}):e.$t("NFT.type3",{start:(0,i.SU)(t).address.slice(0,6),end:(0,i.SU)(t).address.slice(-4),tokenId:(0,i.SU)(h).info.tokenid})),1)])),_:1},8,["finish","success","hash","title","text","btn"])])),_:1},8,["show"])],64)}}};const T=(0,f.Z)(W,[["__scopeId","data-v-189f875a"]]);var N=T},99872:function(e){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOAQMAAAAlhr+SAAAABlBMVEU1QFAbICjSbLjzAAAAEElEQVQI12P4x4AFMf7BRAAjrg3ev0S+fgAAAABJRU5ErkJggg=="}}]);
//# sourceMappingURL=21.861ad642.js.map