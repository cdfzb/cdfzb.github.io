"use strict";(self["webpackChunkbetly_dapp"]=self["webpackChunkbetly_dapp"]||[]).push([[275],{63867:function(t,e,s){s.d(e,{Z:function(){return m}});var n=s(73396),a=s(87139),l=s(49242),i=s(44870),o=(s(18688),s(31754)),c=s(67458),d=s(41258);const r={class:"bind allFlex column"},u={class:"popup-title Wcolor font-Eight font500 center"},h={key:0,class:"bind_ipt center Wcolor"},p={class:"bgPadding"};var g={props:{finish:Boolean,success:Boolean,hash:String,type:String,text:String,title:String,btn:String},emits:["closeFn"],setup(t,{emit:e}){const s=t,{hash:g}=(0,i.BK)(s),{toClipboard:f}=((0,o.l)(),(0,c.Z)());return(e,s)=>{const o=(0,n.up)("van-button");return(0,n.wg)(),(0,n.iD)("div",r,[(0,n.wy)((0,n._)("span",{class:(0,a.C_)(["success-btn Wcolor font-Two",[t.success?"btnBg":"redBg"]])},(0,a.zw)(t.success?e.$t("success"):e.$t("fail")),3),[[l.F8,t.finish]]),(0,n.wy)((0,n.Wm)(d.Z,{class:"loading"},null,512),[[l.F8,!t.finish]]),(0,n._)("p",u,(0,a.zw)(e.$t(t.title)),1),t.finish?(0,n.kq)("",!0):((0,n.wg)(),(0,n.iD)("div",h,[(0,n.WI)(e.$slots,"default")])),t.finish?((0,n.wg)(),(0,n.iD)("div",{key:1,class:(0,a.C_)(["bind_ipt bgPadding center",[t.success?"mainColor font-Ty":"redColor hashFont font-Four"]])},(0,a.zw)(t.success?e.$t(t.text):(0,i.SU)(g)),3)):(0,n.kq)("",!0),(0,n._)("div",p,[(0,n.wy)((0,n.Wm)(o,{class:"btn",type:"primary",block:""},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.$t(t.btn)),1)])),_:1},512),[[l.F8,!t.finish]]),(0,n.wy)((0,n.Wm)(o,{class:"btn",type:t.success?"primary":"danger",block:"",onClick:s[0]||(s[0]=t=>e.$emit("closeFn"))},{default:(0,n.w5)((()=>[(0,n.Uk)((0,a.zw)(e.$t("SwapAlert.close")),1)])),_:1},8,["type"]),[[l.F8,t.finish]])])])}}},f=s(40089);const y=(0,f.Z)(g,[["__scopeId","data-v-4ee0a202"]]);var m=y},5275:function(t,e,s){s.r(e),s.d(e,{default:function(){return I}});var n=s(73396),a=s(44870),l=s(87139);var i=s(40089);var o=s(49242),c=s(97231),d=s(62012),r=s(31754);const u={class:"nft-list padding flex_between"};var h={props:{list:Array,counts:Array,type:String,countTime:Array},emits:["toSell"],setup(t,{emit:e}){const s=t,{type:l,countTime:i}=((0,r.l)(),(0,a.BK)(s)),h=(0,d.tv)(),p=(t,e)=>{if("hasBuy"==l.value)return;const s={color:t.color,index:t.index,tokenid:t.tokenid,canvasid:t.canvasid,endDate:i.value[e]};h.push({path:"/nftDetails",query:s})},g=t=>{e("toSell",t)};return(e,s)=>((0,n.wg)(),(0,n.iD)("div",u,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.list,((e,s)=>((0,n.wg)(),(0,n.j4)(c.Z,{key:s,pixelInfo:e,name:"nft",btnType:"primary",btnText:"NFT.sell",type:(0,a.SU)(l),endDate:(0,a.SU)(i)[s],onToSell:g,count:t.counts[s],onClick:(0,o.iM)((t=>p(e,s)),["stop"])},null,8,["pixelInfo","type","endDate","count","onClick"])))),128))]))}};const p=(0,i.Z)(h,[["__scopeId","data-v-173de72d"]]);var g=p;const f={class:"nft-list padding flex_between"};var y={props:{list:Array,counts:Array,type:String},emits:["toCancel"],setup(t,{emit:e}){(0,d.tv)();const s=(t,s)=>{e("toCancel",t,s)};return(e,a)=>((0,n.wg)(),(0,n.iD)("div",f,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.list,((e,l)=>((0,n.wg)(),(0,n.j4)(c.Z,{key:l,pixelInfo:e,name:"nft",btnType:"primary",btnText:"NFT.cancel",type:t.type,count:t.counts[l],onToCancel:s,onClick:a[0]||(a[0]=(0,o.iM)((()=>{}),["stop"]))},null,8,["pixelInfo","type","count"])))),128))]))}};const m=(0,i.Z)(y,[["__scopeId","data-v-38567a4e"]]);var w=m,S=s(63867),k=s(62672),v=s(5741),U=s(69708);const T={class:"mynft"},_={class:"record-tabs"},b={class:"record-tabs"},L={class:"record-tabs"},C={key:0,class:"font-Four"},x={key:1,class:"font-Four"};var F={setup(t){const e=(0,r.l)(),s=(0,a.qj)({holdList:[],sellList:[],allList:[],active:0,counts:[],sellCounts:[],allCounts:[],countTime:[],loading:!0,finished:!1,page:0}),i=(0,a.qj)({alertShow:!1,finish:!1,success:!1,hash:"",tokenid:"",hashType:"cancel"}),o=async()=>{s.loading=!0;try{s.holdList=await e.allMethods.getUserPixel(e.address).call(),s.loading=!1,e.setLoading(!1);const t=[];s.holdList=s.holdList.map((t=>({...t,id:t.index}))),U.log(s.holdList),s.holdList.forEach((e=>{e.id=e.index,t.push(e.tokenid)})),c(0,t)}catch(t){(0,k.F)(t)}},c=async(t,n)=>{const a=await e.marketMethods.listNftCount(n).call();0==t?(s.counts=s.counts.concat(a.counts_),s.countTime=s.countTime.concat(a.times_)):1==t?s.sellCounts=s.sellCounts.concat(a.counts_):s.allCounts=s.allCounts.concat(a.counts_)},d=()=>{const t=20*s.page;(0,v.Ok)(e.address,t).then((t=>{s.loading=!1,e.setLoading(!1);const n=t.data.marketItemRecEntities;s.sellList=s.sellList.concat(n),s.finished=n.length<20;const a=[];s.sellList.forEach((t=>{a.push(t.tokenId)})),s.sellLoad=!0,c(1,a)}))},u=()=>{const t=20*s.page;(0,v.fl)(e.address,t).then((t=>{s.loading=!1,e.setLoading(!1);const n=t.data.marketItemRecEntities;s.allList=s.allList.concat(n),s.finished=n.length<20;const a=[];s.allList.forEach((t=>{a.push(t.tokenId)})),s.allLoad=!0,c(3,a)}))},h=()=>{s.finished||(s.page++,s.loading=!0,1==s.active?d():u())};(0,n.wF)((()=>{e.initMarketWeb3()})),(0,n.m0)((()=>{e.marketEmpower&&e.address&&(e.setLoading(!0),s.active=0,o())})),(0,n.YP)((()=>s.active),(t=>{e.setLoading(!0),s.page=0,s.loading=!0,s.sellCounts=[],s.allCounts=[],s.counts=[],s.countTime=[],0==t?(s.holdList=[],o()):1==t?(s.sellList=[],d()):(s.allList=[],u())}));const p=async t=>{i.tokenid=t;try{const s=await e.allMethods.getApproved(t).call();s==e.market_address?f():(e.setEmpowerType(2,t),e.showEmpower(!0))}catch(s){U.log(s),(0,k.F)(s)}},f=async()=>{i.hashType="sell",i.alertShow=!0,i.finish=!1,i.success=!1;try{const t=await e.marketMethods.sell(i.tokenid).send({from:e.address});i.finish=!0,i.success=!0,i.hash=t.transactionHash,e.addHash(i.hash,1)}catch(t){i.finish=!0,i.success=!1,i.hash=t.message}},y=async(t,s)=>{i.hashType="cancel",i.alertShow=!0,i.finish=!1,i.success=!1,i.tokenid=s;try{const s=await e.marketMethods.cancel(t).send({from:e.address});i.finish=!0,i.success=!0,i.hash=s.transactionHash,e.addHash(i.hash,5)}catch(n){i.finish=!0,i.success=!1,i.hash=n.message}},m=()=>{e.setLoading(!0),i.alertShow=!1,s.page=0,0==s.active?(s.holdList=[],s.counts=[],o()):(s.sellCounts=[],s.sellList=[],d())};return(t,o)=>{const c=(0,n.up)("no-record"),d=(0,n.up)("van-tab"),r=(0,n.up)("van-list"),u=(0,n.up)("van-tabs"),f=(0,n.up)("van-popup");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",T,[(0,n.Wm)(u,{active:(0,a.SU)(s).active,"onUpdate:active":o[2]||(o[2]=t=>(0,a.SU)(s).active=t),"offset-top":"20","title-active-color":"#fff","title-inactive-color":"#999999",animated:""},{default:(0,n.w5)((()=>[(0,n.Wm)(d,{title:t.$t("NFT.tabs.one"),"title-active-color":"#fff"},{default:(0,n.w5)((()=>[(0,n._)("div",_,[(0,n.Wm)(g,{list:(0,a.SU)(s).holdList,type:"hold",counts:(0,a.SU)(s).counts,onToSell:p,countTime:(0,a.SU)(s).countTime},null,8,["list","counts","countTime"]),0!=(0,a.SU)(s).holdList.length||(0,a.SU)(s).loading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(c,{key:0}))])])),_:1},8,["title"]),(0,n.Wm)(d,{title:t.$t("NFT.tabs.two")},{default:(0,n.w5)((()=>[(0,n._)("div",b,[(0,n.Wm)(r,{loading:(0,a.SU)(s).loading,"onUpdate:loading":o[0]||(o[0]=t=>(0,a.SU)(s).loading=t),finished:(0,a.SU)(s).finished,"immediate-check":!1,"loading-text":t.$t("loadingText"),onLoad:h},{default:(0,n.w5)((()=>[(0,n.Wm)(w,{list:(0,a.SU)(s).sellList,counts:(0,a.SU)(s).sellCounts,type:"sell",onToCancel:y,countTime:(0,a.SU)(s).countTime},null,8,["list","counts","countTime"])])),_:1},8,["loading","finished","loading-text"]),0!=(0,a.SU)(s).sellList.length||(0,a.SU)(s).loading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(c,{key:0}))])])),_:1},8,["title"]),(0,n.Wm)(d,{title:t.$t("NFT.tabs.three")},{default:(0,n.w5)((()=>[(0,n._)("div",L,[(0,n.Wm)(r,{loading:(0,a.SU)(s).loading,"onUpdate:loading":o[1]||(o[1]=t=>(0,a.SU)(s).loading=t),finished:(0,a.SU)(s).finished,"immediate-check":!1,"loading-text":t.$t("loadingText"),onLoad:h},{default:(0,n.w5)((()=>[(0,n.Wm)(g,{list:(0,a.SU)(s).allList,counts:(0,a.SU)(s).allCounts,type:"hasBuy",countTime:(0,a.SU)(s).countTime},null,8,["list","counts","countTime"])])),_:1},8,["loading","finished","loading-text"]),0!=(0,a.SU)(s).allList.length||(0,a.SU)(s).loading?(0,n.kq)("",!0):((0,n.wg)(),(0,n.j4)(c,{key:0}))])])),_:1},8,["title"])])),_:1},8,["active"])]),(0,n.Wm)(f,{show:(0,a.SU)(i).alertShow,"onUpdate:show":o[3]||(o[3]=t=>(0,a.SU)(i).alertShow=t),"close-on-click-overlay":!1},{default:(0,n.w5)((()=>[(0,n.Wm)(S.Z,{finish:(0,a.SU)(i).finish,success:(0,a.SU)(i).success,hash:(0,a.SU)(i).hash,onCloseFn:m,type:(0,a.SU)(i).hashType,title:"sell"==(0,a.SU)(i).hashType?"SwapAlert.title6":"SwapAlert.title2",text:"sell"==(0,a.SU)(i).hashType?"SwapAlert.success3":"SwapAlert.success2",btn:"sell"==(0,a.SU)(i).hashType?"SwapAlert.btn3":"SwapAlert.btn2"},{default:(0,n.w5)((()=>[(0,n._)("div",null,["sell"==(0,a.SU)(i).hashType?((0,n.wg)(),(0,n.iD)("p",C,(0,l.zw)(t.$t("NFT.type1",{start:(0,a.SU)(e).address.slice(0,6),end:(0,a.SU)(e).address.slice(-4),tokenId:(0,a.SU)(i).tokenid})),1)):(0,n.kq)("",!0),"cancel"==(0,a.SU)(i).hashType?((0,n.wg)(),(0,n.iD)("p",x,(0,l.zw)(t.$t("NFT.type2",{start:(0,a.SU)(e).address.slice(0,6),end:(0,a.SU)(e).address.slice(-4),tokenId:(0,a.SU)(i).tokenid})),1)):(0,n.kq)("",!0)])])),_:1},8,["finish","success","hash","type","title","text","btn"])])),_:1},8,["show"])],64)}}};const W=(0,i.Z)(F,[["__scopeId","data-v-515e5e80"]]);var I=W}}]);
//# sourceMappingURL=275.ce5b2eba.js.map